<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>hidden - oxd Docs</title>
  

  <link rel="shortcut icon" href="../../img/gluu_favicon.ico">
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">

  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script>
  <script src="../../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> oxd Docs</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
			
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../..">Home</a>
        
    </li>
<li>
		
          
			
            <li>
    <ul class="subnav">
    <li><span>oxd Server</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../protocol/">Protocol</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../2.4.4/install/">Installation</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../2.4.4/conf/">Configuration</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../2.4.4/logs/">Logs</a>
        
    </li>

        
    </ul>
<li>
		
          
			
            <li>
    <ul class="subnav">
    <li><span>Libraries</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../2.4.4/libraries/api-client-libraries/">oxd API Client Libraries</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../2.4.4/libraries/python/">Python</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../2.4.4/libraries/java/">Java</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../2.4.4/libraries/php/">PHP</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../2.4.4/libraries/node/">Node</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../2.4.4/libraries/ruby/">Ruby</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../2.4.4/libraries/csharp/">CSharp</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../2.4.4/libraries/perl/">Perl</a>
        
    </li>

        
    </ul>
<li>
		
          
			
            <li>
    <ul class="subnav">
    <li><span>Plugin</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../2.4.4/plugin/wordpress/">Wordpress</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../2.4.4/plugin/magento/">Magento</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../2.4.4/plugin/drupal/">Drupal</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../2.4.4/plugin/opencart/">OpenCart</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../2.4.4/plugin/sugarcrm/">SugarCRM</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../2.4.4/plugin/suitecrm/">SuiteCRM</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../2.4.4/plugin/roundcube/">RoundCube</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../2.4.4/plugin/shopify/">Shopify</a>
        
    </li>

        
    </ul>
<li>
		
          
			
            <li>
    <ul class="subnav">
    <li><span>Framework</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../2.4.4/framework/spring/">Java Spring</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../2.4.4/framework/play/">Java Play Framework</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../2.4.4/framework/ruby/">Ruby on Rails</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../2.4.4/framework/python/">Python Flask</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../2.4.4/framework/node/">Node/Express</a>
        
    </li>

        
    </ul>
<li>
		
          
		
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">oxd Docs</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>hidden &raquo;</li>	 
        
      
    
    <li>hidden</li>
    <li class="wy-breadcrumbs-aside">
           
      
        
          <a href="https://github.com/GluuFederation/docs-oxd//blob/master/sources/libraries/node/index.md" class="icon icon-github"> Edit on GitHub</a>
      
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="oxd-node">oxd-node</h1>
<p>oxD node is a client library for the Gluu oxD Server. For information about oxD, visit <a href="http://oxd.gluu.org">http://oxd.gluu.org</a></p>
<h2 id="installation">Installation</h2>
<ul>
<li><a href="https://github.com/GluuFederation/oxd-node">Github sources</a></li>
<li><a href="https://www.gluu.org/docs/deployment/ubuntu/">Gluu Server</a></li>
<li><a href="https://oxd.gluu.org/docs/install/">oxd server</a></li>
</ul>
<p>Install oxd-node using following command:</p>
<pre><code class="sh">$ npm install oxd-node
</code></pre>

<p><strong>Prerequisite</strong></p>
<pre><code>1) You have to install gluu server and oxd-server in your hosting server to use oxd-node
   library with your application.
2) Application will not be working if your host does not have https://.

</code></pre>

<h2 id="configuration">Configuration</h2>
<p>Once the library is installed, create a copy of the sample configuration file for your website in a server <em>writable</em> location and edit the configuration. For example</p>
<p><strong>Configure oxd port</strong></p>
<pre><code>Go to model/request_param.js,
find exports.oxd_port=null and enter oxd port no inplace of &quot;null&quot; which ever is free on your server.
</code></pre>

<p><strong>Note:</strong> The website is registered with the OP and its ID is stored in this config file, also are the other peristant information about the website. So the config file needs to be <em>writable</em> for the server. The <a href="https://github.com/GluuFederation/oxd-node">oxd-node</a> contains complete documentation about itself.</p>
<h2 id="sample-code">Sample Code</h2>
<h3 id="1-register_site">1) register_site</h3>
<p><strong>Request:</strong></p>
<pre><code class="javascript">try {
var oxd = require(&quot;oxd-node&quot;);
oxd.Request.authorization_redirect_uri= &quot;https://rp.example.com/callback&quot;;  //REQUIRED
oxd.register_site(oxd.Request,function(response){
});
} catch (err) {
    console.log(&quot;error:&quot; + err);
}
</code></pre>

<p><strong>Response:</strong></p>
<pre><code class="javascript">{
    &quot;status&quot;:&quot;ok&quot;,
    &quot;data&quot;:{
        &quot;oxd_id&quot;:&quot;6F9619FF-8B86-D011-B42D-00CF4FC964FF&quot;
    }
}
</code></pre>

<h3 id="2-update_site_registration">2) update_site_registration</h3>
<p><strong>Request:</strong></p>
<pre><code class="javascript">try {
var oxd = require(&quot;oxd-node&quot;);
oxd.Request.oxd_id = &quot;your site id&quot;;                                       //REQUIRED
oxd.Request.authorization_redirect_uri= &quot;https://rp.example.com/callback&quot;; //OPTIONAL
oxd.update_site_registration(oxd.Request,function(response){
});
} catch (err) {
    console.log(&quot;error:&quot; + err);
}
</code></pre>

<p><strong>Response:</strong></p>
<pre><code class="javascript">{
    &quot;status&quot;:&quot;ok&quot;
}
</code></pre>

<h3 id="3-get_authorization_url">3) get_authorization_url</h3>
<p><strong>Request:</strong></p>
<pre><code class="javascript">try {
var oxd = require(&quot;oxd-node&quot;);
oxd.Request.oxd_id = &quot;your site id&quot;;                                  //REQUIRED
oxd.Request.acr_values = [&quot;basic&quot;];                                   //OPTIONAL
oxd.get_authorization_url(oxd.Request,function(response){
});
} catch (err) {
    console.log(&quot;error:&quot; + err);
}
</code></pre>

<p><strong>Response:</strong></p>
<pre><code class="javascript">{
    &quot;status&quot;:&quot;ok&quot;,
    &quot;data&quot;:{
        &quot;authorization_url&quot;:&quot;https://server.example.com/authorize?response_type=code&amp;client_id=s6BhdRkqt3&amp;redirect_uri=https%3A%2F%2Fclient.example.org%2Fcb&amp;scope=openid%20profile&amp;acr_values=duo&amp;state=af0ifjsldkj&amp;nonce=n-0S6_WzA2Mj&quot;
    }
}
</code></pre>

<p><strong>Note:</strong> After redirecting to the above URL, the OpenID Provider will return a response that looks like this to the URL your application registered as the redirect URI (parse out the code and state):</p>
<pre><code>HTTP/1.1 302 Found
Location: https://client.example.org/cb?code=SplxlOBeZQQYbYS6WxSbIA&amp;state=af0ifjsldkj&amp;scopes=openid%20profile
</code></pre>

<h3 id="4-get_tokens_by_code">4) get_tokens_by_code</h3>
<p><strong>Request:</strong></p>
<pre><code class="javascript">try {
var oxd = require(&quot;oxd-node&quot;);                                       
oxd.Request.oxd_id = &quot;your site id&quot;;                                 //REQUIRED
oxd.Request.code = &quot;code from OP redirect url&quot;;                      //REQUIRED, code from OP redirect url (see example above)
oxd.request.state=&quot;state from OP redirect url&quot;;                      //REQUIRED
oxd.get_tokens_by_code(oxd.Request,function(response){
});
} catch (err) {
    console.log(&quot;error:&quot; + err);
}
</code></pre>

<p><strong>Response:</strong></p>
<pre><code class="javascript">{
    &quot;status&quot;:&quot;ok&quot;,
    &quot;data&quot;:{
        &quot;access_token&quot;:&quot;SlAV32hkKG&quot;,
        &quot;expires_in&quot;:3600,
        &quot;refresh_token&quot;:&quot;aaAV32hkKG1&quot;
        &quot;id_token&quot;:&quot;eyJ0 ... NiJ9.eyJ1c ... I6IjIifX0.DeWt4Qu ... ZXso&quot;,
        &quot;id_token_claims&quot;: {
             &quot;iss&quot;: &quot;https://server.example.com&quot;,
             &quot;sub&quot;: &quot;24400320&quot;,
             &quot;aud&quot;: &quot;s6BhdRkqt3&quot;,
             &quot;nonce&quot;: &quot;n-0S6_WzA2Mj&quot;,
             &quot;exp&quot;: 1311281970,
             &quot;iat&quot;: 1311280970,
             &quot;at_hash&quot;: &quot;MTIzNDU2Nzg5MDEyMzQ1Ng&quot;
        }
    }
}
</code></pre>

<h3 id="5-get_user_info">5) get_user_info</h3>
<p><strong>Request:</strong></p>
<pre><code class="javascript">try {
var oxd = require(&quot;oxd-node&quot;);                             
oxd.Request.oxd_id = &quot;your site id&quot;;                                 //REQUIRED
oxd.Request.access_token = &quot;access_token from OP redirect url&quot;;      //REQUIRED
oxd.get_user_info(oxd.Request,function(response){
});
} catch (err) {
    console.log(&quot;error:&quot; + err);
}
</code></pre>

<p><strong>Response:</strong></p>
<pre><code class="javascript">{
    &quot;status&quot;:&quot;ok&quot;,
    &quot;data&quot;:{
        &quot;claims&quot;:{
            &quot;sub&quot;: [&quot;248289761001&quot;],
            &quot;name&quot;: [&quot;Jane Doe&quot;],
            &quot;given_name&quot;: [&quot;Jane&quot;],
            &quot;family_name&quot;: [&quot;Doe&quot;],
            &quot;preferred_username&quot;: [&quot;j.doe&quot;],
            &quot;email&quot;: [&quot;janedoe@example.com&quot;],
            &quot;picture&quot;: [&quot;http://example.com/janedoe/me.jpg&quot;]
        }
    }
}
</code></pre>

<h3 id="6-get_logout_uri">6) get_logout_uri</h3>
<p><strong>Request:</strong></p>
<pre><code class="javascript">try {
var oxd = require(&quot;oxd-node&quot;);
oxd.Request.oxd_id = &quot;your site id&quot;;                                 //REQUIRED
oxd.get_logout_uri(oxd.Request,function(response){                   //REQUIRED
});
} catch (err) {
    console.log(&quot;error:&quot; + err);
}
</code></pre>

<p><strong>Response:</strong></p>
<pre><code class="javascript">{
    &quot;status&quot;:&quot;ok&quot;,
    &quot;data&quot;:{
        &quot;uri&quot;:&quot;https://&lt;server&gt;/end_session?id_token_hint=&lt;id token&gt;&amp;state=&lt;state&gt;&amp;post_logout_redirect_uri=&lt;...&gt;&quot;
    }
}
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../ruby/" class="btn btn-neutral float-right" title="hidden"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../php/" class="btn btn-neutral" title="hidden"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
    <!-- Copyright etc -->
    </p>
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../php/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../ruby/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
