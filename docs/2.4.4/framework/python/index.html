<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Python Flask - oxd Docs</title>
  

  <link rel="shortcut icon" href="/img/gluu_favicon.ico">
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../../css/highlight.css">

  <script src="../../../js/jquery-2.1.1.min.js"></script>
  <script src="../../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../../js/highlight.pack.js"></script>
  <script src="../../../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../../.." class="icon icon-home"> oxd Docs</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
			
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../..">Home</a>
        
    </li>
<li>
		
          
			
            <li>
    <ul class="subnav">
    <li><span>oxd Server</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../protocol/">Protocol</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../install/">Installation</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../conf/">Configuration</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../logs/">Logs</a>
        
    </li>

        
    </ul>
<li>
		
          
			
            <li>
    <ul class="subnav">
    <li><span>Libraries</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../libraries/api-client-libraries/">oxd API Client Libraries</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../libraries/python/">Python</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../libraries/java/">Java</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../libraries/php/">PHP</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../libraries/node/">Node</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../libraries/ruby/">Ruby</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../libraries/csharp/">CSharp</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../libraries/perl/">Perl</a>
        
    </li>

        
    </ul>
<li>
		
          
			
            <li>
    <ul class="subnav">
    <li><span>Plugin</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugin/wordpress/">Wordpress</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugin/magento/">Magento</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugin/drupal/">Drupal</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugin/opencart/">OpenCart</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugin/sugarcrm/">SugarCRM</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugin/suitecrm/">SuiteCRM</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugin/roundcube/">RoundCube</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugin/shopify/">Shopify</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../plugin/nextcloud/">NextCloud</a>
        
    </li>

        
    </ul>
<li>
		
          
			
            <li>
    <ul class="subnav">
    <li><span>Framework</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../spring/">Java Spring</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../play/">Java Play Framework</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../ruby/">Ruby on Rails</a>
        
    </li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">Python Flask</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#oxd-flask-demo-site">oxd Flask Demo site</a></li>
                
                    <li><a class="toctree-l4" href="#deployment">Deployment</a></li>
                
                    <li><a class="toctree-l4" href="#demosite-deployment">Demosite deployment</a></li>
                
            
            </ul>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../node/">Node/Express</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../net/">.Net</a>
        
    </li>

        
    </ul>
<li>
		
          
		
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../..">oxd Docs</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../..">Docs</a> &raquo;</li>
    
      
        
          <li>Framework &raquo;</li>	 
        
      
    
    <li>Python Flask</li>
    <li class="wy-breadcrumbs-aside">
           
      
        
          <a href="https://github.com/GluuFederation/docs-oxd//blob/master/sources/2.4.4\framework\python\index.md" class="icon icon-github"> Edit on GitHub</a>
      
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="oxd-flask-demo-site">oxd Flask Demo site</h1>
<p>The following documentation shows how to configure the Python Flask framework to use oxd for authentication. </p>
<h2 id="deployment">Deployment</h2>
<h3 id="prerequisites">Prerequisites</h3>
<p>Ubuntu 14.04 with some basic utilities listed below</p>
<pre><code class="bash">apt-get install apache2 libapache2-mod-wsgi python-dev git python-pip
a2enmod wsgi
a2enmod ssl
</code></pre>

<h3 id="gluu-development-binaries">Gluu Development Binaries</h3>
<pre><code class="bash">echo &quot;deb http://repo.gluu.org/ubuntu/ trusty-devel main&quot; &gt; /etc/apt/sources.list.d/gluu-devel-repo.list
curl http://repo.gluu.org/ubuntu/gluu-apt.key | apt-key add -
apt-get update
apt-get install gluu-oxd-server
</code></pre>

<h3 id="configuring-the-oxd-server">Configuring the oxd-server</h3>
<p>Edit the file <code>/opt/oxd-server/conf/oxd-conf.json</code></p>
<ul>
<li>Change the OP HOST name to your OpenID Provider domain at the line <code>"op_host": "https://ce-dev.gluu.org"</code></li>
</ul>
<p>Edit the file <code>/opt/oxd-server/conf/oxd-default-site-config.json</code></p>
<ul>
<li>Change the <code>response_types</code> line to <code>"response_types": ["code"]</code></li>
</ul>
<p>Start the oxd-server</p>
<pre><code class="bash">service gluu-oxd-server start
</code></pre>

<h2 id="demosite-deployment">Demosite deployment</h2>
<p>OpenID Connect works only with HTTPS connections. So let us get the ssl certs ready</p>
<pre><code class="bash">mkdir /etc/certs
cd /etc/certs
openssl genrsa -des3 -out demosite.key 2048
openssl rsa -in demosite.key -out demosite.key.insecure
mv demosite.key.insecure demosite.key
openssl req -new -key demosite.key -out demosite.csr
openssl x509 -req -days 365 -in demosite.csr -signkey demosite.key -out demosite.crt
</code></pre>

<p>Get the source code for demosite</p>
<pre><code class="bash">cd /var/www/html
git clone https://github.com/GluuFederation/oxd-python.git
</code></pre>

<p>Deploying the site</p>
<pre><code class="bash">cd oxd-python
pip install -r requirements.txt
cp demosite/demosite.conf /etc/apache2/sites-available/demosite.conf
chown www-data demosite/demosite.cfg
a2ensite demosite
service apache2 restart
</code></pre>

<p>Now the site would be available as the default site for https (port 443) at your domain.
However the callback urls need to be configured before you can see things working.
Edit <code>demosite/demosite.cfg</code> and change the redirect uris for yor domain. <strong>OR</strong> If you are testing
at a local server then you can add <code>client.example.com</code> to you <code>/etc/hosts</code> to point to your
IP, instead of editing the uris in the <code>demosite.cfg</code> file.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../node/" class="btn btn-neutral float-right" title="Node/Express"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../ruby/" class="btn btn-neutral" title="Ruby on Rails"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
    <!-- Copyright etc -->
    </p>
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../ruby/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../node/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
